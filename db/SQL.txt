GRANT ALL PRIVILEGES ON *.* TO 'COSMOS'@'%'  IDENTIFIED BY 'PASSWORD';

CREATE DATABASE room_management;

CREATE TABLE username (
rfid_id int,
name varchar(10),
PRIMARY KEY(rfid_id)
);

CREATE TABLE zaishitu(
time DATETIME,
rfid_id int,
zaishitu boolean,
PRIMARY KEY (time,rfid_id),
FOREIGN KEY(rfid_id)
REFERENCES username(rfid_id));

INSERT INTO username VALUES(901, '高野裕太郎');
INSERT INTO zaishitu VALUES('2002-09-30 00:00:00', 901, false);

create view html_output
as
select time, name, zaishitu from zaishitu as T1
inner join (
    select rfid_id as F1,max(time) as F2 from zaishitu group by rfid_id
) as T3
on T3.F1=T1.rfid_id and T3.F2=T1.time
inner join(
    select name,rfid_id from username
) as T2
on T1.rfid_id=T2.rfid_id

CREATE VIEW html_output
as
select max(time) as time , name, zaishitu from zaishitu, username
where zaishitu.rfid_id = username.rfid_id
GROUP BY name;